import {useState,useRef,useEffect,useCallback,useMemo}from'react';import {jsxs,jsx}from'react/jsx-runtime';// @asafarim/dd-menu - A minimal, elegant, and highly customizable dropdown menu React component
var re=({items:C,theme:q="auto",variant:o="default",size:V="md",className:Q="",style:ee={},trigger:U,placement:G="bottom-start",onItemClick:S,closeOnClick:R=true,disabled:M=false,hoverDelay:Y=150,onHoverChange:L,onFontSizeChange:z})=>{let[b,k]=useState(false),[B,i]=useState(new Set),[y,p]=useState(null),g=useRef(null),l=useRef(null),c=useRef(null),v=useRef(null),t=useRef(new Map),[m]=useState(false),[D]=useState(V);useEffect(()=>{L&&L(m);},[m,L]),useEffect(()=>{z&&z(D);},[D,z]),useEffect(()=>{let d=r=>{let e=l.current||c.current,a=e&&e.contains(r.target),n=g.current&&g.current.contains(r.target);!a&&!n&&(k(false),i(new Set),p(null),T());};return b?(setTimeout(()=>{document.addEventListener("mousedown",d);},50),()=>{document.removeEventListener("mousedown",d),T();}):()=>{}},[b]);let T=useCallback(()=>{v.current&&(clearTimeout(v.current),v.current=null),t.current.forEach(d=>clearTimeout(d)),t.current.clear();},[]),I=useCallback(d=>{i(r=>{let e=new Set(r);return e.has(d)?e.delete(d):e.add(d),e}),p(d);},[]),E=useCallback(d=>{let r=t.current.get(d);if(r&&(clearTimeout(r),t.current.delete(d)),o==="sidebar"){i(e=>{let a=new Set(e);return a.add(d),a});return}i(e=>{let a=new Set(e);return a.add(d),a});},[o]),_=useCallback(d=>{let r=t.current.get(d);if(r&&(clearTimeout(r),t.current.delete(d)),o==="sidebar"){i(a=>{let n=new Set(a);return n.delete(d),n});return}let e=setTimeout(()=>{i(a=>{let n=new Set(a);return n.delete(d),n}),t.current.delete(d);},Y);t.current.set(d,e);},[o,Y]),N=useCallback((d,r)=>{if(d.disabled){r.preventDefault();return}if(d.children?.length){r.preventDefault(),I(d.id);return}d.onClick&&d.onClick(),S&&S(d),R&&(k(false),i(new Set),p(null),T());},[S,R,I,T]),w=useCallback(d=>{p(d.id),d.children?.length&&o!=="sidebar"&&E(d.id);},[o,E]),j=useCallback(d=>{y===d.id&&p(null),d.children?.length&&o!=="sidebar"&&_(d.id);},[y,o,_]),$=useCallback(d=>{let r=t.current.get(d);r&&(clearTimeout(r),t.current.delete(d)),i(e=>{let a=new Set(e);return a.add(d),a}),p(d);},[]),W=useCallback(d=>{o!=="sidebar"&&_(d);},[o,_]),X=useCallback((d,r=0)=>d.map(e=>{let a=e.children&&e.children.length>0,n=B.has(e.id);return jsxs("li",{className:"dd-menu__item-wrapper",children:[jsxs("div",{className:`
              dd-menu__item
              ${e.disabled?"dd-menu__item--disabled":""}
              ${e.active?"dd-menu__item--active":""}
              ${a?"dd-menu__item--has-children":""}
              ${r>0?"dd-menu__item--nested":""}
              ${y===e.id?"dd-menu__item--hovering":""}
            `.trim(),onClick:u=>N(e,u),onMouseEnter:()=>w(e),onMouseLeave:()=>j(e),role:"menuitem",tabIndex:e.disabled?-1:0,"aria-disabled":e.disabled,"aria-expanded":a?n:void 0,"aria-haspopup":a?"menu":void 0,children:[e.icon&&jsx("span",{className:"dd-menu__item-icon",children:typeof e.icon=="string"?jsx("span",{children:e.icon}):e.icon}),jsx("span",{className:"dd-menu__item-label",children:e.link&&!a?jsx("a",{href:e.link,className:"dd-menu__item-link",onClick:u=>u.stopPropagation(),children:e.label}):e.label}),a&&jsx("span",{className:"dd-menu__item-arrow",children:jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",style:{transform:o==="sidebar"&&n?"rotate(90deg)":void 0,transition:"transform 0.2s ease"},children:jsx("path",{d:"M6 4l4 4-4 4",stroke:"currentColor",strokeWidth:"1.5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),a&&jsx("ul",{className:`
                dd-menu__submenu
                dd-menu__submenu--level-${r+1}
                ${n?"dd-menu__submenu--open":""}
              `.trim(),role:"menu",onMouseEnter:()=>$(e.id),onMouseLeave:()=>W(e.id),children:X(e.children,r+1)})]},e.id)}),[B,y,N,w,j,$,W,o]),A=jsxs("button",{ref:l,className:"dd-menu__trigger",onClick:d=>{d.preventDefault(),d.stopPropagation(),M||k(!b);},disabled:M,"aria-expanded":b,"aria-haspopup":"menu",children:[jsx("span",{children:"Menu"}),jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:jsx("path",{d:"M4 6l4 4 4-4",stroke:"currentColor",strokeWidth:"1.5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})})]});return jsxs("div",{className:`
        dd-menu 
        dd-menu--${o} 
        dd-menu--${V} 
        dd-menu--${q} 
        ${b?"dd-menu--open":""}
        ${M?"dd-menu--disabled":""}
        ${Q}
      `.trim(),style:ee,children:[U?jsx("div",{ref:c,onClick:d=>{d.preventDefault(),d.stopPropagation(),M||k(!b);},className:"dd-menu__custom-trigger",children:U}):A,b&&jsx("div",{ref:g,className:`dd-menu__content dd-menu__content--${G}`,role:"menu","aria-orientation":"vertical",onClick:d=>d.stopPropagation(),children:jsx("ul",{className:"dd-menu__list",role:"none",children:X(C)})})]})};var se=re;var oe=({items:C,theme:q="auto",variant:o="default",size:V="md",className:Q="",style:ee={},placeholder:U="Search...",onItemSelect:G,onSearchChange:S,disabled:R=false,clearable:M=true,maxHeight:Y=300,noResultsText:L="No results found",searchKeys:z=["label","id"],caseSensitive:b=false,minSearchLength:k=0,debounceMs:B=300,selectedItem:i=null,allowCustomValue:y=false,onCustomValue:p})=>{let[g,l]=useState(false),[c,v]=useState(""),[t,m]=useState(-1),[D,T]=useState(""),I=useRef(null),E=useRef(null),_=useRef(null);useEffect(()=>{let e=setTimeout(()=>{T(c),S?.(c);},B);return ()=>clearTimeout(e)},[c,B,S]);let N=useMemo(()=>{if(D.length<k)return C;let e=b?D:D.toLowerCase(),a=n=>n.reduce((u,h)=>{if(z.some(K=>{let de=h[K];return typeof de=="string"?(b?de:de.toLowerCase()).includes(e):false}))u.push(h);else if(h.children){let K=a(h.children);K.length>0&&u.push({...h,children:K});}return u},[]);return a(C)},[C,D,z,b,k]),w=useMemo(()=>{let e=(a,n=0)=>a.reduce((u,h)=>(h.disabled||u.push({...h,depth:n}),h.children&&u.push(...e(h.children,n+1)),u),[]);return e(N)},[N]),j=e=>{let a=e.target.value;v(a),m(-1),!g&&a&&l(true);},$=e=>{e.disabled||(v(e.label),l(false),m(-1),G?.(e),e.onClick?.());},W=e=>{switch(e.key){case "ArrowDown":e.preventDefault(),g?m(a=>a<w.length-1?a+1:0):l(true);break;case "ArrowUp":e.preventDefault(),g&&m(a=>a>0?a-1:w.length-1);break;case "Enter":e.preventDefault(),g&&t>=0&&w[t]?$(w[t]):y&&c&&p&&(p(c),l(false));break;case "Escape":l(false),m(-1),E.current?.blur();break;case "Tab":l(false),m(-1);break}},X=()=>{v(""),l(false),m(-1),E.current?.focus(),G?.(null);},A=useCallback(e=>{I.current&&!I.current.contains(e.target)&&(l(false),m(-1));},[]);useEffect(()=>(document.addEventListener("mousedown",A),()=>document.removeEventListener("mousedown",A)),[A]),useEffect(()=>{i?v(i.label):i===null&&v("");},[i]),useEffect(()=>{if(t>=0&&_.current){let e=_.current.children[t];e&&e.scrollIntoView({block:"nearest",behavior:"smooth"});}},[t]);let d=(e,a)=>{let n=a===t,u=["dd-menu-item",e.disabled&&"dd-menu-item--disabled",e.active&&"dd-menu-item--active",n&&"dd-menu-item--highlighted",e.className].filter(Boolean).join(" ");return jsxs("li",{className:u,style:{paddingLeft:`${.5+e.depth*1.5}rem`,...e.style},onClick:()=>$(e),onMouseEnter:()=>m(a),children:[e.icon&&jsx("span",{className:"dd-menu-item__icon",children:(typeof e.icon=="string",e.icon)}),jsx("span",{className:"dd-menu-item__label",children:e.label})]},`${e.id}-${e.depth}`)},r=["dd-searchable",`dd-searchable--${o}`,`dd-searchable--${V}`,`dd-searchable--${q}`,R&&"dd-searchable--disabled",g&&"dd-searchable--open",Q].filter(Boolean).join(" ");return jsxs("div",{ref:I,className:r,style:ee,children:[jsxs("div",{className:"dd-searchable__input-wrapper",children:[jsx("input",{ref:E,type:"text",className:"dd-searchable__input",placeholder:U,value:c,onChange:j,onKeyDown:W,onFocus:()=>l(true),disabled:R,autoComplete:"off"}),M&&c&&jsx("button",{type:"button",className:"dd-searchable__clear",onClick:X,tabIndex:-1,children:"\u2715"}),jsx("div",{className:"dd-searchable__arrow",children:jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsx("path",{d:"M3 4.5L6 7.5L9 4.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),g&&jsx("div",{className:"dd-searchable__dropdown",style:{maxHeight:Y},children:N.length>0?jsx("ul",{ref:_,className:"dd-searchable__list",children:w.map((e,a)=>d(e,a))}):jsxs("div",{className:"dd-searchable__no-results",children:[L,y&&c&&jsxs("button",{className:"dd-searchable__custom-option",onClick:()=>{p?.(c),l(false);},children:['Add "',c,'"']})]})})]})};var le=oe;
export{re as DDMenu,se as DDMenuDefault,oe as DDSearchable,le as DDSearchableDefault,re as default};//# sourceMappingURL=index.mjs.map
//# sourceMappingURL=index.mjs.map