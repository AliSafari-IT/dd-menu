import {useState,useRef,useEffect,useCallback}from'react';import {jsxs,jsx}from'react/jsx-runtime';// @asafarim/dd-menu - A minimal, elegant, and highly customizable dropdown menu React component
var D=({items:X,theme:T="auto",variant:a="default",size:N="md",className:j="",style:J={},trigger:E,placement:Z="bottom-start",onItemClick:h,closeOnClick:I=true,disabled:g=false,hoverDelay:R=150,onHoverChange:w,onFontSizeChange:y})=>{let[m,b]=useState(false),[C,u]=useState(new Set),[v,l]=useState(null),k=useRef(null),L=useRef(null),B=useRef(null),M=useRef(null),i=useRef(new Map),[P]=useState(false),[O]=useState(N);useEffect(()=>{w&&w(P);},[P,w]),useEffect(()=>{y&&y(O);},[O,y]),useEffect(()=>{let e=t=>{let d=L.current||B.current,n=d&&d.contains(t.target),o=k.current&&k.current.contains(t.target);!n&&!o&&(b(false),u(new Set),l(null),f());};return m?(setTimeout(()=>{document.addEventListener("mousedown",e);},50),()=>{document.removeEventListener("mousedown",e),f();}):()=>{}},[m]);let f=useCallback(()=>{M.current&&(clearTimeout(M.current),M.current=null),i.current.forEach(e=>clearTimeout(e)),i.current.clear();},[]),$=useCallback(e=>{u(t=>{let d=new Set(t);return d.has(e)?d.delete(e):d.add(e),d}),l(e);},[]),A=useCallback(e=>{let t=i.current.get(e);if(t&&(clearTimeout(t),i.current.delete(e)),a==="sidebar"){u(d=>{let n=new Set(d);return n.add(e),n});return}u(d=>{let n=new Set(d);return n.add(e),n});},[a]),x=useCallback(e=>{let t=i.current.get(e);if(t&&(clearTimeout(t),i.current.delete(e)),a==="sidebar"){u(n=>{let o=new Set(n);return o.delete(e),o});return}let d=setTimeout(()=>{u(n=>{let o=new Set(n);return o.delete(e),o}),i.current.delete(e);},R);i.current.set(e,d);},[a,R]),U=useCallback((e,t)=>{if(e.disabled){t.preventDefault();return}if(e.children?.length){t.preventDefault(),$(e.id);return}e.onClick&&e.onClick(),h&&h(e),I&&(b(false),u(new Set),l(null),f());},[h,I,$,f]),G=useCallback(e=>{l(e.id),e.children?.length&&a!=="sidebar"&&A(e.id);},[a,A]),H=useCallback(e=>{v===e.id&&l(null),e.children?.length&&a!=="sidebar"&&x(e.id);},[v,a,x]),V=useCallback(e=>{let t=i.current.get(e);t&&(clearTimeout(t),i.current.delete(e)),u(d=>{let n=new Set(d);return n.add(e),n}),l(e);},[]),W=useCallback(e=>{a!=="sidebar"&&x(e);},[a,x]),Y=useCallback((e,t=0)=>e.map(d=>{let n=d.children&&d.children.length>0,o=C.has(d.id);return jsxs("li",{className:"dd-menu__item-wrapper",children:[jsxs("div",{className:`
              dd-menu__item
              ${d.disabled?"dd-menu__item--disabled":""}
              ${d.active?"dd-menu__item--active":""}
              ${n?"dd-menu__item--has-children":""}
              ${t>0?"dd-menu__item--nested":""}
              ${v===d.id?"dd-menu__item--hovering":""}
            `.trim(),onClick:S=>U(d,S),onMouseEnter:()=>G(d),onMouseLeave:()=>H(d),role:"menuitem",tabIndex:d.disabled?-1:0,"aria-disabled":d.disabled,"aria-expanded":n?o:void 0,"aria-haspopup":n?"menu":void 0,children:[d.icon&&jsx("span",{className:"dd-menu__item-icon",children:typeof d.icon=="string"?jsx("span",{children:d.icon}):d.icon}),jsx("span",{className:"dd-menu__item-label",children:d.link&&!n?jsx("a",{href:d.link,className:"dd-menu__item-link",onClick:S=>S.stopPropagation(),children:d.label}):d.label}),n&&jsx("span",{className:"dd-menu__item-arrow",children:jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",style:{transform:a==="sidebar"&&o?"rotate(90deg)":void 0,transition:"transform 0.2s ease"},children:jsx("path",{d:"M6 4l4 4-4 4",stroke:"currentColor",strokeWidth:"1.5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),n&&jsx("ul",{className:`
                dd-menu__submenu
                dd-menu__submenu--level-${t+1}
                ${o?"dd-menu__submenu--open":""}
              `.trim(),role:"menu",onMouseEnter:()=>V(d.id),onMouseLeave:()=>W(d.id),children:Y(d.children,t+1)})]},d.id)}),[C,v,U,G,H,V,W,a]),q=jsxs("button",{ref:L,className:"dd-menu__trigger",onClick:e=>{e.preventDefault(),e.stopPropagation(),g||b(!m);},disabled:g,"aria-expanded":m,"aria-haspopup":"menu",children:[jsx("span",{children:"Menu"}),jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:jsx("path",{d:"M4 6l4 4 4-4",stroke:"currentColor",strokeWidth:"1.5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})})]});return jsxs("div",{className:`
        dd-menu 
        dd-menu--${a} 
        dd-menu--${N} 
        dd-menu--${T} 
        ${m?"dd-menu--open":""}
        ${g?"dd-menu--disabled":""}
        ${j}
      `.trim(),style:J,"data-theme":T,children:[E?jsx("div",{ref:B,onClick:e=>{e.preventDefault(),e.stopPropagation(),g||b(!m);},className:"dd-menu__custom-trigger",children:E}):q,m&&jsx("div",{ref:k,className:`dd-menu__content dd-menu__content--${Z}`,role:"menu","aria-orientation":"vertical",onClick:e=>e.stopPropagation(),children:jsx("ul",{className:"dd-menu__list",role:"none",children:Y(X)})})]})};var F=D;export{D as DDMenu,F as DDMenuDefault,D as default};//# sourceMappingURL=index.mjs.map
//# sourceMappingURL=index.mjs.map